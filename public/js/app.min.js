!function(n){n.fn.ajaxForm=function(e){"use strict";function c(e,i,a,n){var r=i.find('[name="'+a+'"]');if(void 0!==n&&(r=r.eq(n)),r.length){r.addClass("is-invalid");var t=r.parents("div.input-group");t.length?t.after('<div class="d-block invalid-feedback">'+e+"</div>"):r.after('<div class="invalid-feedback">'+e+"</div>")}}var f=n.extend({},{container:!1,beforeSend:!1,onSuccess:!1,onError:!1},e),i=document.getElementById(f.container)||this.parent(),v=n('<div class="alert alert-danger" role="alert"></div>').hide().prependTo(i);this.submit(function(e){e.preventDefault(),f.beforeSend&&f.beforeSend(this);var i,d=n(this),a="multipart/form-data"==this.enctype;i=a?new FormData(this):d.serialize(),v.hide();var l=d.find(":submit");l.prop("disabled",!0),n.ajax({url:this.getAttribute("action"),type:this.getAttribute("method"),data:i,dataType:"json",cache:!a,contentType:!a&&"application/x-www-form-urlencoded; charset=UTF-8",processData:!a}).done(function(e){if(d.find(":input").removeClass("is-invalid"),d.find("div.invalid-feedback").remove(),l.prop("disabled",!1),f.onSuccess)f.onSuccess(e);else{var i=e.redirect.split("#");window.location.replace(i[0]),1<i.length&&(window.location.hash=i[1],window.location.reload(!0))}}).fail(function(e,i,a){var n="";if(f.onError)f.onError(e,i,a);else{if(400==e.status){var r=e.responseJSON;for(var t in d.find(":input").removeClass("is-invalid"),d.find("div.invalid-feedback").remove(),r){var o=r[t];if("object"==typeof o)for(var s in o)c(o[s],d,t+"[]",s);else"error"==t?n=o+"<br>":c(o,d,t)}}else n="Ocurri√≥ un error al intentar procesar la consulta. Vuelva a intentarlo y, si el problema persiste, pongase en contacto con el administrador.";n&&(v.html('<i class="fa fa-fw fa-exclamation-circle mr-2"></i>'+n).show(),v.get(0).scrollIntoView())}l.prop("disabled",!1)})})}}(jQuery);